<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrightEye运维</title>

    {% block main-head %}
    <!--STYLESHEET-->
    <!--=================================================-->

    <!--Open Sans Font [ OPTIONAL ]-->
    <link href="/static/css/css.css" rel="stylesheet" type="stylesheet">


    <!--Bootstrap Stylesheet [ REQUIRED ]-->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">


	<!--Nifty Stylesheet [ REQUIRED ]-->
	<link href="/static/css/nifty.min.css" rel="stylesheet">


	<!--Font Awesome [ OPTIONAL ]-->
	<link href="/static/css/font-awesome.css" rel="stylesheet">

    <!--Customize Css [ REQUIRED ]-->
	<link href="/static/css/custom.css" rel="stylesheet">

    <!--bootstrap select Css [ REQUIRED ]-->
	<link href="/static/plugins/bootstrap-select/bootstrap-select.min.css" rel="stylesheet">
	<link href="/static/plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet">
    <link href="/static/plugins/bootstrap-fileinput/css/fileinput.min.css" rel="stylesheet">
    
    <!--JAVASCRIPT-->
    <!--=================================================-->

    <!--Pace - Page Load Progress Par [OPTIONAL]-->
    <link href="/static/css/pace.min.css" rel="stylesheet">
	<script src="/static/js/pace.min.js"></script>

    {% endblock %}

</head>


<body>{% csrf_token %}

    <div id="container" class="effect mainnav-lg">
        
        <!--NAVBAR-->
        <!--===================================================-->
        <header id="navbar">
            <div id="navbar-container" class="boxed">

                <!--Brand logo & name-->
                <!--================================-->
                <div class="navbar-header">
                    <a href="index.html" class="navbar-brand">
                        <img src="/static/img/logo.png" alt="Nifty Logo" class="brand-icon">
                        <div class="brand-title">
                            <span class="brand-text"> &nbsp;BrightEye</span>
                        </div>
                    </a>
                </div>
                <!--================================-->
                <!--End brand logo & name-->


                <!--Navbar Dropdown-->
                <!--================================-->
                <div class="navbar-content clearfix">
                    <ul class="nav navbar-top-links pull-left">

                        <!--Navigation toggle button-->
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <li class="tgl-menu-btn">
                            <a class="mainnav-toggle" href="#">
                                <i class="fa fa-navicon fa-lg"></i>
                            </a>
                        </li>
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <!--End Navigation toggle button-->
                    </ul>

					<ul class="nav navbar-top-links pull-right">

                        <!--Notification dropdown-->
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <li id="dropdown-user" class="dropdown"> <!--mark-->
                            <a href="#" data-toggle="dropdown" class="dropdown-toggle text-right">
								<span class="pull-right">
									<img class="img-circle img-user media-object" src="/static/img/av1.png" alt="Profile Picture">
								</span>
								<div class="username hidden-xs">{{ request.user.userprofile.name }}</div>
							</a>

                            <!--Notification dropdown menu-->
                            <div class="dropdown-menu dropdown-menu-md dropdown-menu-right with-arrow panel-default">

								<!-- User dropdown menu -->
								<ul class="head-list">
									<li>
										<a href="#">
											<i class="fa fa-user fa-fw fa-lg"></i> 个人信息
										</a>
									</li>

								</ul>

								<!-- Dropdown footer -->
								<div class="pad-all text-right">
									<a href="{% url 'logout' %}" class="btn btn-primary">
										<i class="fa fa-sign-out fa-fw"></i> Logout
									</a>
								</div>
							</div>
                        </li>
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <!--End notifications dropdown-->

                    </ul>
                </div>
                <!--================================-->
                <!--End Navbar Dropdown-->

            </div>
        </header>
        <!--===================================================-->
        <!--END NAVBAR-->

        <div class="boxed">

            <!--CONTENT CONTAINER-->
            <!--===================================================-->
            <div id="content-container">
                
                <!--Page Title-->
                <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                <div id="page-title">
                    <h1 class="page-header text-overflow">
                        {% block page-title %}
                        {% endblock %}
                    </h1>

                    <!--Searchbox-->
                </div>
                <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                <!--End page title-->

                <!--Page content-->
                <!--===================================================-->
                <div id="page-content">
                {% block page-content %}

					<div class="row"> <!--首页mark-->
                        <div class="col-sm-6 col-lg-3">
                            <div class="panel media pad-all">
                                <div class="media-left"> <!--图标-->
									<span class="icon-wrap icon-wrap-sm icon-circle bg-success">
									<i class="fa fa-server fa-2x"></i>
									</span>
								</div>
                                <div class="media-body">
                                    <p id="total-servers" class="text-2x mar-no text-thin">0</p>
                                    <p class="text-muted mar-no">已管理服务器</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-3">
                            <div class="panel media pad-all">
                                <div class="media-left"> <!--图标-->
									<span class="icon-wrap icon-wrap-sm icon-circle bg-info">
									<i class="fa fa-user fa-2x"></i>
									</span>
								</div>
                                <div class="media-body">
                                    <p id="total-users" class="text-2x mar-no text-thin">0</p>
                                    <p class="text-muted mar-no">注册用户数</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-3">
                            <div class="panel media pad-all">
                                <div class="media-left"> <!--图标-->
									<span class="icon-wrap icon-wrap-sm icon-circle bg-warning">
									<i class="fa fa-comment fa-2x"></i>
									</span>
								</div>
                                <div class="media-body">
                                    <p id="current-logging-users" style="cursor: pointer" class="text-2x mar-no text-thin">0</p>
                                    <p class="text-muted mar-no">当前在线用户</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-3">
                            <div class="panel media pad-all">
                                <div class="media-left"> <!--图标-->
									<span class="icon-wrap icon-wrap-sm icon-circle bg-danger">
									<i class="fa fa-desktop fa-2x"></i>
									</span>
								</div>
                                <div class="media-body">
                                    <p id="current-connected-hosts" style="cursor: pointer" class="text-2x mar-no text-thin">0</p>
                                    <p class="text-muted mar-no">正在连接的主机数</p>
                                </div>
                            </div>
                        </div>

                        <!--========================================================-->

					    <div class="col-lg-8">
					        <!--Network Line Chart-->
					        <!--===================================================-->
					        <div class="panel">
					            <div class="panel-heading">
									<div class="panel-control">
										<button id="demo-panel-network-refresh" data-toggle="panel-overlay" data-target="#demo-panel-network" class="btn"><i class="fa fa-rotate-right"></i></button>
										<div class="btn-group">
											<button class="dropdown-toggle btn" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-gear"></i></button>
											<ul class="dropdown-menu dropdown-menu-right">
												<li><a href="#">Action</a></li>
												<li><a href="#">Another action</a></li>
												<li><a href="#">Something else here</a></li>
												<li class="divider"></li>
												<li><a href="#">Separated link</a></li>
											</ul>
										</div>
									</div>
									<h3 class="panel-title">用户登录量统计</h3>
								</div>
                                <div id="chart-container" style="height: 300px;min-width: 310px;"></div>

					        </div>
					    </div>
					    <div class="col-lg-4">
					        <div class="panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">最近一周活跃用户</h3>
                                </div>

                                <div class="panel-body" style="height: 300px;">
                                    <table class="table fixed-table-container">
                                        <thead>
                                            <tr>
                                                <th>用户</th>
                                                <th>操作次数</th>
                                                <th>操作命令数</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recent-active-users">

                                        </tbody>
                                    </table>
                                </div><!--end panel-body-->

                            </div>
					    </div>
					</div>
					
					<div class="row">
					    <div class="col-lg-12">
                            <div class="panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">近期批量任务</h3>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th class="text-center">任务ID</th>
                                                <th class="text-center">日期</th>
                                                <th>操作用户</th>
                                                <th>操作主机数</th>
                                                <th>操作类型</th>
                                                <th>操作内容</th>
                                                <th>成功数</th>
                                                <th>失败数</th>
                                                <th>未知数</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                                <td>0</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">近期操作危险统计</h3>
                                </div>
                            </div>
                        </div>

					</div>

                {% endblock %}
                </div>
                <!--===================================================-->
                <!--End page content-->
            </div>
            <!--===================================================-->
            <!--END CONTENT CONTAINER-->


            <!--MAIN NAVIGATION-->
            <!--===================================================-->
            <nav id="mainnav-container">
                <div id="mainnav">

                    <!--================================-->
                    <div id="mainnav-menu-wrap">
                        <div class="nano">
                            <div class="nano-content">

                                <ul id="mainnav-menu" class="list-group">
                                    <li>
                                        <a href="/">
                                            <i class="fa fa-dashboard"></i>
                                            <span class="menu-title">首页</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'host_list' %}?selected_group=-1">
                                            <i class="fa fa-server"></i>
                                            <span class="menu-title">
                                                <strong>主机</strong>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-random"></i>
                                            <span class="menu-title">批量</span>
                                        </a>
                                        <!--submenu-->
                                        <ul class="collapse">
                                            <li><a href="{% url 'hosts_multi' %}">批量命令</a></li>
                                            <li><a href="{% url 'hosts_multi_filetrans' %}">文件分发</a></li>
                                            <li><a href="{% url 'hosts_crontab' %}">计划任务</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-book"></i>
                                            <span class="menu-title">操作记录</span>
                                        </a>
                                        <!--submenu-->
                                        <ul class="collapse">
                                            <li><a href="#">按用户</a></li>
                                            <li><a href="#">按主机</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="fa fa-cog"></i>
                                            <span class="menu-title">配置</span>
                                        </a>
                                    </li>
						        </ul>

                            </div>
                        <div class="nano-pane" style="display: none;"><div class="nano-slider" style="height: 1490px; transform: translate(0px, 0px);"></div></div></div>
                    </div>
                    <!--================================-->
                    <!--End menu-->

                </div>
            </nav>
            <!--===================================================-->
            <!--END MAIN NAVIGATION-->

        </div>



        <!-- FOOTER -->
        <!--===================================================-->
        <footer id="footer">

            <div class="hide-fixed pull-right pad-rgt">v1.0</div>

			<p class="pad-lft">&#0169; 2016 BrightEye ; Powered by xuefeng.</p>

        </footer>
        <!--===================================================-->
        <!-- END FOOTER -->


    </div>
    <!--===================================================-->
    <!-- END OF CONTAINER -->


    <!--JAVASCRIPT-->
	<!--=================================================-->

	<!--jQuery [ REQUIRED ]-->
	<script src="/static/js/jquery-2.1.1.min.js"></script>

	<!--BootstrapJS [ RECOMMENDED ]-->
	<script src="/static/js/bootstrap.min.js"></script>

	<!--Fast Click [ OPTIONAL ]-->
	<script src="/static/js/fastclick.min.js"></script>

	<!--Nifty Admin [ RECOMMENDED ]-->
	<script src="/static/js/nifty.min.js"></script>
	<script src="/static/plugins/bootstrap-select/bootstrap-select.min.js"></script>
	<script src="/static/plugins/js.cookie.js"></script>
	<script src="/static/plugins/jquery-ui/jquery-ui.min.js"></script>
	<script src="/static/plugins/bootstrap-fileinput/js/fileinput.js"></script>
	<script src="/static/plugins/bootstrap-fileinput/js/plugins/canvas-to-blob.js"></script>
	<script src="/static/plugins/bootstrap-fileinput/js/fileinput_locale_zh.js"></script>

    <script src="/static/plugins/bootstrap-validator/bootstrapValidator.js"></script>
    <script src="/static/plugins/highstock/js/highstock.js"></script>
    <script src="/static/plugins/highstock/js/modules/exporting.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){

            //var csrftoken = $.cookie('csrftoken');
            var csrftoken = Cookies.get('csrftoken');

            function csrfSafeMethod(method) {
                // these HTTP methods do not require CSRF protection
                return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
            }
            $.ajaxSetup({
                beforeSend: function(xhr, settings) {
                    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                        xhr.setRequestHeader("X-CSRFToken", csrftoken);
                    }
                }
            });

        //set active menu node on left sidebar
        SetActiveMenu("{{active_node}}");

        });

        function SetActiveMenu(active_node){

            //console.log("activ---enode:: " + active_node);
            if (active_node == ''){
                active_node = '/';
            }
            var node_ele = $("#mainnav-menu-wrap "+ " a[href='" +active_node + "']").parent();
            node_ele.addClass("active-link");
            if (node_ele.parent().hasClass("collapse")){
                node_ele.parent().addClass("in");
            }

        }
    </script>

    {% block bottom-js %}
    {% endblock %}

</body>
</html>